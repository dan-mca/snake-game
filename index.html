<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake Game</title>
    <link rel="stylesheet" href="main.css">
</head>
<body>
    <header class="header">
        <h1>Snake</h1>
    </header>
    <main>
        <canvas id="gameCanvas" class="canvas" width="600" height="600"></canvas>
        <div class="game-details">
            <p id='score'>Score: 0</p>
            <p id='length'>Snake Length: 4</p>
            
            <button onclick="drawGame()">Start Game</button>
            <button onclick="reset()">Play Again</button>
        </div>
    </main>
    <footer class="footer"></footer>

    <script src="script.js"></script>
    <!-- <script>
        
        class Canvas {
            constructor() {
            // get canvas from html
                this.canvas = document.getElementById('gameCanvas');

                // set canvas context to 2d
                this.ctx = this.canvas.getContext('2d');
                }
                // clear canvas
            clear() {
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
            }
        }
            
        
        // snake class; draw, move and control snake
        class Snake{
            constructor(dx, dy) {
                this.position = [
                {x: 300, y:150},
                {x: 290, y:150},
                {x: 280, y:150},
                {x: 270, y:150}
                ];
                this.dx = dx;
                this.dy = dy;
                this.canvas = new Canvas();
                let key = '';
                this.key = document.addEventListener('keydown', logKey);
                    function logKey(event) {
                    key = event.code;
                        //console.log(` ${event.code}, ${key}`);
                    }
            }

            // draw each sement of the snake
            draw() {
                this.position.forEach(function (snakePart) {
                    canvas.ctx.fillStyle = 'red';
                    canvas.ctx.fillRect(snakePart.x, snakePart.y, 10, 10);
                })
            }

            // move the snake
            move() {
            const snakeBody = {
                x: this.position[0].x + this.dx, 
                y: this.position[0].y + this.dy};
            this.position.unshift(snakeBody);
            this.position.pop();
            }

            // control the snake with arrow keys
            controlSnake(key) {
            
                // IF left arrow pressed and snake is not moving right, move snake 10px right
                if(key== 'ArrowLeft' && this.dx != 10) {
                    this.dx = -10;
                    this.dy = 0;
                }

                // IF right arrow pressed and snake is not moving left, move snake 10px left
                if(key == 'ArrowRight' && this.dx != -10) {
                    this.dx = 10;
                    this.dy = 0;
                }

                // IF up arrow pressed and snake is not moving down, move snake 10px up
                if(key == 'ArrowUp' && this.dy != 10) {
                    this.dx = 0;
                    this.dy = -10;
                }

                // IF down arrow pressend and snake is not moving up, move snake 10px down
                if(key == 'ArrowDown' && this.dy != -10) {
                    this.dx = 0;
                    this.dy = 10;
                }
            }
        }

        let snake = new Snake(10, 0); 

        // game over if snake collides with canvas border
        function gameOver() {
            this.canvas = new Canvas();
            //this.snake = new Snake(10, 0);
            if(snake.position[0].x < 0 || snake.position[0].x >= canvas.canvas.width) {
                return true;
            }
            if(snake.position[0].y <= 0 || snake.position[0].y >= canvas.canvas.height) {
                return true;
            }
        }
        

        // Game class; update canvas to animate snake movement, set score, game speed
        class Game {
            constructor(gameSpeed){
                this.score = 0;
                //this.snake = new Snake(10, 0);
                this.gameSpeed = gameSpeed;
            }


            drawGame() {
                
                if(gameOver()) return;

                setInterval(function() {
                    canvas.clear();
                    snake.draw();
                    snake.move();
                    snake.controlSnake();
                    if(gameOver()) return;
                    console.log(`x:${snake.position[0].x}, y:${snake.position[0].y}`);
                },1000/this.gameSpeed)
            }

                // if(gameOver()) return;
                // canvas.clear();
                // snake.draw();
                // snake.move();
                // setTimeout(this.drawGame, 1000/this.gameSpeed);
                // console.log(snake.position[0].x);
            }

        let game = new Game(5);
        game.drawGame();

    </script> -->
</body>
</html>